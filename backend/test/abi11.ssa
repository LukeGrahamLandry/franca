# wasm cares about signetures and can't just infer them from retK. 
# $f() must be () -> (I64) dispite never returning. 
# same for $h() but that doesn't even have a direct callsite you can use to cheat.  
# the indirect call would be a dynamic error so doesn't really test anything 
# but you can look in the module to make sure the signeture is correct. 

export function l $main() {
@start
    call $g(w 1, l $h)
    ret 0
}

function $g(w %cond, l %indirect) {
@start
    jnz %cond, @t, @unreachable
@t
    ret
@unreachable
    %never =l call $f()
    %never =l call %indirect()
    ret
}

function l $f() {
@start
    hlt
}

function l $h() {
@start
    hlt
}
