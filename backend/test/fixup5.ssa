# bug from qbe mailing list
# https://gist.github.com/kengorab/da319f45f7f871d0601395f76af76761

data $arr = { z 64 }
data $arridx = { l 8 }
data $fmt = { b "%d\n", b 0 }

export function l $main() {
@start
  %_1 =l loadl $arridx
  %_2 =l sub %_1, 8

  %_3 =l add %_2, $arr
  storel 1234, %_3

  %_4 =l loadl %_3
  call $printf(l $fmt, ..., l %_4)

  ret 0
}

# >>> output
# 1234
# <<<
