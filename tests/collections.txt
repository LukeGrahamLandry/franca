@import(interp, collections);

fn main(_canary: i64) i64 = {
    var v: List(i64) = list(1);
    assert_eq(len(v.maybe_uninit[]), 1);
    push(v!addr, 6);  // TODO: fix error message for missing !addr from being ""abbigous call", thats not true, its not declared func
    assert_eq(len(v.maybe_uninit[]), 1);
    push(v!addr, 8);
    assert_eq(len(v.maybe_uninit[]), 4);
    push(v!addr, 9);
    assert_eq(v.len[], 3);
    assert_eq(len(v.maybe_uninit[]), 4);
    assert_eq(addr(v!addr, 0)[], 6);
    assert_eq(addr(v!addr, 1)[], 8);
    assert_eq(addr(v!addr, 2)[], 9);
    drop(v!addr);
    
    _canary
}
 