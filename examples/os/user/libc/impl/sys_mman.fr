
mmap :: fn(addr: rawptr, len: i64, prot: i64, flags: i64, fd: Fd, offset: i64) i64 = with_syscalls {
    result := Syscall'mmap(addr, len, prot, flags, fd, offset);
    @trace("mmap(%, %) = %", len, flags, result);
    @assert_ne(result, 0, "some sort of corruption is going on because i over commit and can't null");
    result
};

munmap :: fn(addr: rawptr, len: i64) i64 = with_syscalls {
    result := Syscall'munmap(addr, len);
    @trace("mumap(%, %)", addr, len);
    @assert_eq(result.value, 0, "some sort of corruption is going on. munmap(%) can't fail", addr);
    result.value
};

mprotect :: fn(addr: i64, len: i64, prot: i64) i64 = 0;
