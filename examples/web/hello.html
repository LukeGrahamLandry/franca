<style>
canvas:focus {
    outline: none;
}
</style>
<script type="module">
// THIS IS UNFINISHED
// TODO: the env imports call postMessage 
import { imports, handleWasmLoaded } from "./worker.js";
import { webgpu_wasm_exports, init_gpu } from "../../graphics/web/gfx.js";
let canvas = document.createElement("canvas");
document.body.style = "margin: 0;";
canvas.style = "border: 'none'; width:100%;height:100%;";
canvas.tabIndex = "1";  // this makes it focusable so it gets key events.
document.body.appendChild(canvas);
canvas.focus();

let w = await WebAssembly.instantiateStreaming(fetch("target/hello.wasm"), { 
    webgpu: webgpu_wasm_exports,
    env: imports.env,
});
await init_gpu(w, canvas);
handleWasmLoaded(w, []);
// franca examples/mandelbrot_ui.fr -arch wasm32 -wgpu -o examples/web/target/hello.wasm
</script>
