
main :: fn() void = {
    s := import("@/lib/sys/fs.fr")'read_file_from_last_arg();
    s := s.split(",", temp()).items();
    one, two := (0, 0);
    
    for s { s |
        a, remaining := convert_number(s, 10, dec_digit);
        b, _ := convert_number(remaining.rest(1), 10, dec_digit);
        
        range(a, b+1) { id |
            s := @tfmt("%", id);
            one += id * int(invalid1(s));
            two += id * int(invalid2(s));
        };
    };
    
    println(one);
    println(two);
}

invalid1 :: fn(s: Str) bool = 
    s.len.umod(2) == 0 && s.slice(0, s.len/2) == s.rest(s.len/2);

invalid2 :: fn(s: Str) bool = {
    range(1, s.len) { i |
        continue :: local_return;
        @if(s.len.umod(i) != 0) continue();
        needle := s.slice(0, i);
        range(0, s.len/i) { j |
            @if(s.subslice(i*j, i) != needle) continue();
        };
        return true;
    };
    false
}
