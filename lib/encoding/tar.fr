// https://www.gnu.org/software/tar/manual/html_node/Standard.html

Header :: @struct {
    name: Array(u8, 100);
    mode: Array(u8, 8);
    uid: Array(u8, 8);
    gid: Array(u8, 8);
    size: Array(u8, 12);
    mtime: Array(u8, 12);
    chksum: Array(u8, 8);
    typeflag: u8;
    linkname: Array(u8, 100);
    magic: Array(u8, 6);
    version: Array(u8, 2);
    uname: Array(u8, 32);
    gname: Array(u8, 32);
    devmajor: Array(u8, 8);
    devminor: Array(u8, 8);
    prefix: Array(u8, 155);
    twelve: Array(u8, 12);
};

// leading ascii zeros and null terminator
as_octal :: fn(bytes: ~T) ?i64 #where = {
    bytes: []u8 = bytes.items();
    value, rest := convert_number_dyn(bytes, 8);
    if rest.len != 1 || bytes[bytes.len - rest.len] != 0 {
        return(.None);
    };
    (Some = value)
}
