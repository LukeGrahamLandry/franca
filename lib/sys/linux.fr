
LinuxLibc :: @struct(
    // TODO: these are for musl. do other libcs use different lengths?
    Utsname    :: @struct(
        sysname: Array(u8, 65),
        nodename: Array(u8, 65),
        release: Array(u8, 65),
        version: Array(u8, 65),
        machine: Array(u8, 65),
        __domainname: Array(u8, 65),
    ),
    DirEnt :: @struct(
        d_ino: u64, 
        d_seekoff: u64, 
        d_reclen: u16, 
        d_type: DirEntType, 
        d_name: Array(u8, 256),
    ),
    MapFlag :: @enum(i64) (Private = 2, Anonymous = 32),
    OpenFlag :: @enum(i64) (Read = 0, Write = 1, ReadWrite = 2, Create = 64, Truncate = 512, Append = 1024),
);

// TODO: it would be more sane to mark this #libc but (compile bug)            HACK
//       i redeclare the symbol in the ir for aot with get_smuggled_libc_function if it doesn't match the target.  -- Sep 17
fn uname(buf: *LinuxLibc.Utsname) voidResult #redirect(*MacosLibc.Utsname, voidResult);

fn readdir(dirp: *Dir) *LinuxLibc.DirEnt #libc;  // TODO: nullable niche 
